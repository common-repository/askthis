!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=181)}({181:function(e,t,n){e.exports=n(182)},182:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}window.onload=function(){var e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiDomain=t+"/"}var t,n,o;return t=e,(n=[{key:"getQuestions",value:function(){var e=this,t=this;fetch("https://api.ipify.org?format=json").then(function(e){return e.json()}).then(function(n){var a=n.ip;t.ip=a;var o=[],r=0,s=document.getElementsByClassName("askthis"),i=!0,l=!1,u=void 0;try{for(var c,d=s[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=c.value;null!=f.dataset.question&&o.push(f.dataset.question),null!=f.dataset.id&&(r=f.dataset.id)}}catch(e){l=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw u}}if(r>0&&o.length>0){var p="id="+r+"&url="+window.location.href+"&questions="+o+"&ip="+t.ip;fetch(e.apiDomain+"api/v1/questions?"+p,{mode:"cors"}).then(function(e){return e.json()}).then(function(e){var n=e.data,a=e.status;if(null!=a&&a){var o=!0,r=!1,i=void 0;try{for(var l,u=s[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;null!=n[c.dataset.question]&&null!=n[c.dataset.question].view?(c.innerHTML=n[c.dataset.question].view,c.style.display="block",c.post_token=n[c.dataset.question].post_token,c.update_token=""):c.remove()}}catch(e){r=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}var d=document.getElementsByClassName("askthisLabel"),f=!0,p=!1,v=void 0;try{for(var m,h=d[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){m.value.addEventListener("click",function(){t.postAnswer(this)})}}catch(e){p=!0,v=e}finally{try{f||null==h.return||h.return()}finally{if(p)throw v}}}}).catch(function(e){console.log("errors in getting the question"),console.log(e)})}})}},{key:"postAnswer",value:function(e){var t=this,n=e.parentNode;if(n.querySelectorAll('input[name="test"')&&null!=n.dataset.question&&null!=n.dataset.id){var a={id:n.dataset.id,qt:n.dataset.question,url:window.location.href,ip:this.ip,answer_id:e.dataset.value,post_token:n.post_token,update_token:n.update_token};n.answerData=a,fetch(this.apiDomain+"api/v1/answer",{mode:"cors",method:"POST",body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){var a=e.status,o=e.update_token,r=e.feedback,s=e.confirm_message,i=e.error_message;null!=n.querySelector(".feedback-container")&&n.querySelector(".feedback-container").remove(),a?(t.showStatusMessage(n,"success",s),n.update_token=o,null!=r&&t.showFeedbackForm(n,r)):t.showStatusMessage(n,"error",i)}).catch(function(e){console.log(e)})}}},{key:"showFeedbackForm",value:function(e,t){var n=this,a=document.createElement("div");a.className="form-group feedback-container";var o=document.createElement("div");o.className="form-group";var r=document.createElement("textarea");r.className="form-control askthis-textarea",r.placeholder=t.question,r.addEventListener("input",function(){r.value.length>0?i.style.display="inline-block":i.style.display="none"}),o.appendChild(r);var s=document.createElement("div");s.className="form-group";var i=document.createElement("button");i.className="btn btn-success",i.innerHTML=t.send_button_label,i.style.display="none",i.onclick=function(){""==r.value?n.showStatusMessage(e,"error",error_message):n.postFeedback(e,r.value)},s.appendChild(i),a.appendChild(o),a.appendChild(s),e.appendChild(a)}},{key:"postFeedback",value:function(e,t){var n=this,a={id:e.dataset.id,qt:e.dataset.question,url:window.location.href,ip:this.ip,feedback_value:t,post_token:e.post_token};fetch(this.apiDomain+"api/v1/feedback",{method:"POST",mode:"cors",body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){var a=t.status,o=t.message;a?n.feedbackConfirm(e,o):n.showStatusMessage(e,"success",o)}).catch(function(t){n.showStatusMessage(e,"error",message)})}},{key:"showStatusMessage",value:function(e,t,n){var a="alert alert-success";"error"==t&&(a="alert alert-danger");var o=e.getElementsByClassName("alert");if(o.length>0)o[0].innerText=n,o[0].className=a;else{var r=document.createElement("div");r.innerHTML=n,r.className=a,e.appendChild(r)}}},{key:"feedbackConfirm",value:function(e,t){var n=document.createElement("div");n.innerHTML=t,n.className="alert alert-success",e.parentNode.insertBefore(n,e.nextSibling),e.remove()}}])&&a(t.prototype,n),o&&a(t,o),e}();questions=new e("https://askthis.nl"),questions.getQuestions()}}});